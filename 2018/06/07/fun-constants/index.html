<!DOCTYPE html>
<html lang="en">

<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="변수보다 복잡한 Go의 상수">
  <meta name="generator" content="Hugo 0.101.0" />

  <title>별 것 없을 것 같은 상수의 별 것 &middot; Awesome Patrick</title>

  
  
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pure/1.0.0/pure-min.css">

  <!--[if lte IE 8]>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pure/1.0.0/grids-responsive-old-ie-min.css">
  <![endif]-->
  <!--[if gt IE 8]><!-->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pure/1.0.0/grids-responsive-min.css">
  <!--<![endif]-->

  <!--[if lte IE 8]>
  <link rel="stylesheet" href="https://tramamte.github.io/css/side-menu-old-ie.css">
  <![endif]-->
  <!--[if gt IE 8]><!-->
  <link rel="stylesheet" href="https://tramamte.github.io/css/side-menu.css">
  <!--<![endif]-->

  <link rel="stylesheet" href="https://tramamte.github.io/css/blackburn.css">

  
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.1.0/css/all.css" integrity="sha384-lKuwvrZot6UHsBSfcMvOkWwlCMgc0TaWr+30HWe3a4ltaBwTZhyTEggF5tJv8tbt" crossorigin="anonymous">

  
  <link href="https://fonts.googleapis.com/css?family=Nanum+Gothic:400,700|Nanum+Gothic+Coding:400,700|Raleway:400,700|Roboto+Mono" rel="stylesheet">
  

  

  
    
      
  
  <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      CommonHTML: {
        scale: 100
      },
      jax: ["input/TeX","output/HTML-CSS"],
      displayAlign: "left",
      displayIndent: "1em",
    });
  </script>
  <script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/MathJax.js?config=TeX-MML-AM_CHTML' async></script>
      
    
  

  


  
  

  

  <link rel="apple-touch-icon" sizes="57x57" href="https://tramamte.github.io/apple-icon-57x57.png">
<link rel="apple-touch-icon" sizes="60x60" href="https://tramamte.github.io/apple-icon-60x60.png">
<link rel="apple-touch-icon" sizes="72x72" href="https://tramamte.github.io/apple-icon-72x72.png">
<link rel="apple-touch-icon" sizes="76x76" href="https://tramamte.github.io/apple-icon-76x76.png">
<link rel="apple-touch-icon" sizes="114x114" href="https://tramamte.github.io/apple-icon-114x114.png">
<link rel="apple-touch-icon" sizes="120x120" href="https://tramamte.github.io/apple-icon-120x120.png">
<link rel="apple-touch-icon" sizes="144x144" href="https://tramamte.github.io/apple-icon-144x144.png">
<link rel="apple-touch-icon" sizes="152x152" href="https://tramamte.github.io/apple-icon-152x152.png">
<link rel="apple-touch-icon" sizes="180x180" href="https://tramamte.github.io/apple-icon-180x180.png">
<link rel="icon" type="image/png" sizes="192x192" href="https://tramamte.github.io/android-icon-192x192.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://tramamte.github.io/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="96x96" href="https://tramamte.github.io/favicon-96x96.png">
<link rel="icon" type="image/png" sizes="16x16" href="https://tramamte.github.io/favicon-16x16.png">
<link rel="manifest" href="https://tramamte.github.io/manifest.json">
<meta name="msapplication-TileColor" content="#ffffff">
<meta name="msapplication-TileImage" content="https://tramamte.github.io/ms-icon-144x144.png">
<meta name="theme-color" content="#ffffff">

  
  

</head>


<body>
<div id="layout">

  
<a href="#menu" id="menuLink" class="menu-link">
  <i class="far fa-arrow-alt-circle-right fa-2x fa-fw" style="margin: 0; padding: 0;"></i>
</a>

<div id="menu">
  
  <a class="pure-menu-heading brand" href="https://tramamte.github.io/">Awesome<br>Patrick</a>


  <div class="pure-menu">
    <ul class="pure-menu-list">
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="https://tramamte.github.io/"><i class='fas fa-home fa-fw'></i>Home</a>
      
        </li>
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="https://tramamte.github.io/topics/"><i class='fas fa-folder fa-fw'></i>Topics</a>
      
        </li>
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="https://tramamte.github.io/tags/"><i class='fas fa-tag fa-fw'></i>Tags</a>
      
        </li>
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="https://tramamte.github.io/posts/"><i class='fas fa-list fa-fw'></i>Posts</a>
      
        </li>
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="https://tramamte.github.io/about/"><i class='fas fa-user fa-fw'></i>About</a>
      
        </li>
      
    </ul>
  </div>
  <div class="pure-menu social">
  <ul class="pure-menu-list">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
    <li class="pure-menu-item">
      <a class="pure-menu-link" href="https://tramamte.github.io/index.xml"><i class="fas fa-rss fa-fw"></i>RSS</a>
    </li>
    

  </ul>
</div>

</div>
<div id="menuBackground"></div>
  
  <div id="mask"></div>
  <div id="main">


<div class="header">
  <h1>별 것 없을 것 같은 상수의 별 것</h1>
  <h2>변수보다 복잡한 Go의 상수</h2>
</div>
<div class="content">

  <div class="post-meta">

  <div>
    <i class="fas fa-calendar-alt fa-fw"></i>
    <time>Jun 07, 2018 18:32</time>
  </div>

  

  
  
  
  <div>
    <i class="fas fa-folder fa-fw"></i>
    
      <a class="post-taxonomy-topic" href="https://tramamte.github.io/topics/go">go</a>
    
  </div>
  
  

  
  
  
  <div>
    <i class="fas fa-tag fa-fw"></i>
    
      <a class="post-taxonomy-tag" href="https://tramamte.github.io/tags/fun-go">fun-go</a>
    
  </div>
  
  

</div>

  
<script>
  function toggleToc() {
    var x = document.getElementById("toc");
    if (x.style.display === "none") {
        x.style.display = "block";
    } else {
        x.style.display = "none";
    }
  }
</script>

<div class="post-meta">
<div>
  <i class="fas fa-file-alt fa-fw"></i>
  <a href="javascript:toggleToc();">Table of Contents</a>
</div>
<div id="toc" style="display: none;"><nav id="TableOfContents">
  <ul>
    <li><a href="#iota-초기값">iota 초기값</a></li>
    <li><a href="#한-줄에-두-번-쓴-iota">한 줄에 두 번 쓴 iota</a></li>
    <li><a href="#중간값-지정">중간값 지정</a></li>
    <li><a href="#iota-유지-범위">iota 유지 범위</a></li>
    <li><a href="#복잡한-상수-그룹">복잡한 상수 그룹</a></li>
  </ul>
</nav></div>
</div>



  <h1 id="상수의-타입과-한계">상수의 타입과 한계</h1>
<p><a href="https://tramamte.github.io/2018/06/05/fun-variables-and-types/">명시적이지 않은 듯 명시적인 Go</a>에서 한 것처럼 <code>reflect</code> 패키지를 이용해 타입을 명시하지 않은 상수의 타입에 대해 알아보자.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#007020;font-weight:bold">package</span> main
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#007020;font-weight:bold">import</span> <span style="color:#4070a0">&#34;fmt&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#007020;font-weight:bold">import</span> <span style="color:#4070a0">&#34;reflect&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#007020;font-weight:bold">func</span> <span style="color:#06287e">main</span>() {
</span></span><span style="display:flex;"><span>	<span style="color:#007020;font-weight:bold">const</span> A = <span style="color:#40a070">1</span>
</span></span><span style="display:flex;"><span>	<span style="color:#007020;font-weight:bold">const</span> B = <span style="color:#40a070">3.14</span>
</span></span><span style="display:flex;"><span>	<span style="color:#007020;font-weight:bold">const</span> C = <span style="color:#40a070">1.0</span> <span style="color:#666">+</span> <span style="color:#40a070">1.0i</span>
</span></span><span style="display:flex;"><span>	<span style="color:#007020;font-weight:bold">const</span> (
</span></span><span style="display:flex;"><span>		D = <span style="color:#007020;font-weight:bold">iota</span>
</span></span><span style="display:flex;"><span>		E
</span></span><span style="display:flex;"><span>    )
</span></span><span style="display:flex;"><span>	
</span></span><span style="display:flex;"><span>	fmt.<span style="color:#06287e">Println</span>(reflect.<span style="color:#06287e">TypeOf</span>(A))
</span></span><span style="display:flex;"><span>	fmt.<span style="color:#06287e">Println</span>(reflect.<span style="color:#06287e">TypeOf</span>(B))
</span></span><span style="display:flex;"><span>	fmt.<span style="color:#06287e">Println</span>(reflect.<span style="color:#06287e">TypeOf</span>(C))
</span></span><span style="display:flex;"><span>	fmt.<span style="color:#06287e">Println</span>(reflect.<span style="color:#06287e">TypeOf</span>(D))
</span></span><span style="display:flex;"><span>	fmt.<span style="color:#06287e">Println</span>(reflect.<span style="color:#06287e">TypeOf</span>(E))
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>위 코드의 실행 결과는 다음과 같다.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>int
</span></span><span style="display:flex;"><span>float64
</span></span><span style="display:flex;"><span>complex128
</span></span><span style="display:flex;"><span>int
</span></span><span style="display:flex;"><span>int
</span></span></code></pre></div><p>변수의 경우와 같은 규칙이 적용된다.</p>
<hr>
<p>그런데 정말 상수가 그 타입인 것일까, 상수를 읽을 때 그 타입이 되는 것일까? 무슨 소린고 하니,</p>
<div class="highlight"><div style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">8
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#007020;font-weight:bold">package</span> main
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#007020;font-weight:bold">import</span> <span style="color:#4070a0">&#34;fmt&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#007020;font-weight:bold">func</span> <span style="color:#06287e">main</span>() {
</span></span><span style="display:flex;"><span>	<span style="color:#007020;font-weight:bold">var</span> i = <span style="color:#40a070">256</span> <span style="color:#666">&lt;&lt;</span> <span style="color:#40a070">100</span>
</span></span><span style="display:flex;"><span>	fmt.<span style="color:#06287e">Println</span>(i)
</span></span><span style="display:flex;"><span>}</span></span></code></pre></td></tr></table>
</div>
</div>
<p>이 코드는 다음과 같은 오류가 발생한다.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>./main.go:6:13: constant 324518553658426726783156020576256 overflows int
</span></span></code></pre></div><p><code>int</code>에 담을 수 있는 한계를 벗어났다는 것이다. 100비트나 왼쪽으로 옮겼으니&mdash;\( 256 \times 2^{100} \)&mdash; 당연한 결과다.</p>
<p><strong>그런데 <code>var</code>를 <code>const</code>로 바꾸면 다음과 같은 오류가 발생한다.</strong></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>./main.go:7:16: constant 324518553658426726783156020576256 overflows int
</span></span></code></pre></div><p>오류 발생 시점이 달라졌다. 7라인, <code>Println()</code>을 호출할 때 오류가 발생한다.</p>
<p>그렇다면 <code>const i = 256 &lt;&lt; 100</code> 코드로 값을 할당할 때는 오류가 발생하지 않는다는 의미일까?</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#007020;font-weight:bold">package</span> main
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#007020;font-weight:bold">import</span> <span style="color:#4070a0">&#34;fmt&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#007020;font-weight:bold">func</span> <span style="color:#06287e">main</span>() {
</span></span><span style="display:flex;"><span>	<span style="color:#007020;font-weight:bold">const</span> i = <span style="color:#40a070">256</span> <span style="color:#666">&lt;&lt;</span> <span style="color:#40a070">100</span>
</span></span><span style="display:flex;"><span>	<span style="color:#007020;font-weight:bold">const</span> j = <span style="color:#40a070">2</span> <span style="color:#666">&lt;&lt;</span> <span style="color:#40a070">100</span>
</span></span><span style="display:flex;"><span>	fmt.<span style="color:#06287e">Println</span>(i <span style="color:#666">/</span> j)
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>위 코드는 다음과 같이 정상적인 결과가 나온다.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>128
</span></span></code></pre></div><p><code>i</code>, <code>j</code> 각각에는 정상적으로 의도한 값이 할당돼 있는 것처럼 보인다.</p>
<p>이 결과는 <code>int</code>보다 큰 값을 표시할 수 있는 <code>float</code>을 이용해 <code>i</code>를 출력해 보면 좀 더 명확해 진다.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#007020;font-weight:bold">package</span> main
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#007020;font-weight:bold">import</span> <span style="color:#4070a0">&#34;fmt&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#007020;font-weight:bold">func</span> <span style="color:#06287e">main</span>() {
</span></span><span style="display:flex;"><span>	<span style="color:#007020;font-weight:bold">const</span> i = <span style="color:#40a070">256</span> <span style="color:#666">&lt;&lt;</span> <span style="color:#40a070">100</span>
</span></span><span style="display:flex;"><span>	fmt.<span style="color:#06287e">Println</span>(<span style="color:#007020">float64</span>(i))
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>3.2451855365842673e+32
</span></span></code></pre></div><p>위 결과에서처럼 <code>i</code>에는 의도한 \(256 \times 2^{100}\) 값이 정확히 담겨있다. 내부적으로 <code>const</code> 처리를 어떻게 하는지에 대해서는 숙제로 남겨두고, 결과만 봤을 때는 <code>const</code>를 읽을 때 타입이 결정되는 것 같다.</p>
<h1 id="iota에-대해-좀-더-자세히">iota에 대해 좀 더 자세히</h1>
<h2 id="iota-초기값">iota 초기값</h2>






<blockquote class="note">


<p><code>iota</code>는 0부터 시작해 호출할 때마다 1씩 증가한다.</p>

</blockquote>

<p>아래 코드의 결과를 보면 이 문구는 명확해 보인다.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#007020;font-weight:bold">package</span> main
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#007020;font-weight:bold">import</span> <span style="color:#4070a0">&#34;fmt&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#007020;font-weight:bold">func</span> <span style="color:#06287e">main</span>() {
</span></span><span style="display:flex;"><span>	<span style="color:#007020;font-weight:bold">const</span> (
</span></span><span style="display:flex;"><span>		Zero = <span style="color:#007020;font-weight:bold">iota</span>
</span></span><span style="display:flex;"><span>		One
</span></span><span style="display:flex;"><span>		Two
</span></span><span style="display:flex;"><span>	)
</span></span><span style="display:flex;"><span>	
</span></span><span style="display:flex;"><span>	fmt.<span style="color:#06287e">Println</span>(Zero)
</span></span><span style="display:flex;"><span>	fmt.<span style="color:#06287e">Println</span>(One)
</span></span><span style="display:flex;"><span>	fmt.<span style="color:#06287e">Println</span>(Two)
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>0
</span></span><span style="display:flex;"><span>1
</span></span><span style="display:flex;"><span>2
</span></span></code></pre></div><p>그런데 C에서 <code>enum</code>은 초기값을 달리해 다음과 같이 쓸 수 있다.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span><span style="color:#007020;font-weight:bold">enum</span> {
</span></span><span style="display:flex;"><span>	minus_one <span style="color:#666">=</span> <span style="color:#666">-</span><span style="color:#40a070">1</span>,	<span style="color:#60a0b0;font-style:italic">/* = -1 */</span>
</span></span><span style="display:flex;"><span>	zero,			<span style="color:#60a0b0;font-style:italic">/* = 0 */</span>
</span></span><span style="display:flex;"><span>	one				<span style="color:#60a0b0;font-style:italic">/* = 1 */</span>
</span></span><span style="display:flex;"><span>};
</span></span></code></pre></div><p>Go의 <code>iota</code>는 어떨까?</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#007020;font-weight:bold">package</span> main
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#007020;font-weight:bold">import</span> <span style="color:#4070a0">&#34;fmt&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#007020;font-weight:bold">func</span> <span style="color:#06287e">main</span>() {
</span></span><span style="display:flex;"><span>	<span style="color:#007020;font-weight:bold">const</span> (
</span></span><span style="display:flex;"><span>		minusOne = <span style="color:#666">-</span><span style="color:#40a070">1</span>
</span></span><span style="display:flex;"><span>		zero = <span style="color:#007020;font-weight:bold">iota</span>
</span></span><span style="display:flex;"><span>		one
</span></span><span style="display:flex;"><span>	)
</span></span><span style="display:flex;"><span>	
</span></span><span style="display:flex;"><span>	fmt.<span style="color:#06287e">Println</span>(zero)
</span></span><span style="display:flex;"><span>	fmt.<span style="color:#06287e">Println</span>(one)
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p><code>iota</code>를 <code>zero</code>에서 처음 호출했으니 <code>zero</code>가 0이 되면 좋을텐데 위 코드의 결과는 다음과 같다.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>1
</span></span><span style="display:flex;"><span>2
</span></span></code></pre></div><p><code>zero</code>의 값이 0이 아닌 1이다. 좀 더 명확히 하기 위해 <code>minusTwo = -2</code>를 맨 앞에 추가하면 결과는 다음과 같다.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#007020;font-weight:bold">const</span> (
</span></span><span style="display:flex;"><span>	minusTwo = <span style="color:#666">-</span><span style="color:#40a070">2</span>
</span></span><span style="display:flex;"><span>	minusOne = <span style="color:#666">-</span><span style="color:#40a070">1</span>
</span></span><span style="display:flex;"><span>	zero = <span style="color:#007020;font-weight:bold">iota</span>
</span></span><span style="display:flex;"><span>	one
</span></span><span style="display:flex;"><span>)
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>2
</span></span><span style="display:flex;"><span>3
</span></span></code></pre></div><p>즉, <code>iota</code>는 상수 그룹 안에서 어딘가에 쓰이면, 그 앞뒤로는 모두 암시적으로(implicitly) 모두 <code>iota</code>가 쓰인 것으로 본다. 따라서 위 예에서는 <code>zero</code>에 <code>iota</code>가 세 번째 쓰인 것으로 처리돼 2의 값을 갖게 된다. 이 규칙은 타입이 달라도 유효하다.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#007020;font-weight:bold">const</span> (
</span></span><span style="display:flex;"><span>	minusTwo = <span style="color:#4070a0">&#34;-2&#34;</span>
</span></span><span style="display:flex;"><span>	minusOne = <span style="color:#4070a0">&#34;-1&#34;</span>
</span></span><span style="display:flex;"><span>	zero = <span style="color:#007020;font-weight:bold">iota</span>
</span></span><span style="display:flex;"><span>	one
</span></span><span style="display:flex;"><span>)
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>2
</span></span><span style="display:flex;"><span>3
</span></span></code></pre></div><h2 id="한-줄에-두-번-쓴-iota">한 줄에 두 번 쓴 iota</h2>
<p>상수도 변수처럼 comma(,)를 이용해 한 줄에 복수개를 선언할 수 있다. 이 경우 <code>iota</code>의 값은 어떻게 될까?</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#007020;font-weight:bold">package</span> main
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#007020;font-weight:bold">import</span> <span style="color:#4070a0">&#34;fmt&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#007020;font-weight:bold">func</span> <span style="color:#06287e">main</span>() {
</span></span><span style="display:flex;"><span>	<span style="color:#007020;font-weight:bold">const</span> (
</span></span><span style="display:flex;"><span>		zero, one = <span style="color:#007020;font-weight:bold">iota</span>, <span style="color:#007020;font-weight:bold">iota</span>
</span></span><span style="display:flex;"><span>		two, three
</span></span><span style="display:flex;"><span>	)
</span></span><span style="display:flex;"><span>	
</span></span><span style="display:flex;"><span>	fmt.<span style="color:#06287e">Println</span>(zero)
</span></span><span style="display:flex;"><span>	fmt.<span style="color:#06287e">Println</span>(one)
</span></span><span style="display:flex;"><span>	fmt.<span style="color:#06287e">Println</span>(two)
</span></span><span style="display:flex;"><span>	fmt.<span style="color:#06287e">Println</span>(three)
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>0
</span></span><span style="display:flex;"><span>0
</span></span><span style="display:flex;"><span>1
</span></span><span style="display:flex;"><span>1
</span></span></code></pre></div><p><code>iota</code>는 호출할 때마다 값이 증가한다고 했는데 예상과 결과가 다르지 않은가.</p>
<p>이에 대해 <a href="https://golang.org/ref/spec#ConstSpec">Go spec.</a>에는 다음과 같이 기술돼 있다.</p>






<blockquote class="quote">


<p>Multiple uses of <code>iota</code> in the same <code>ConstSpec</code> all have the same value.</p>

</blockquote>

<p>comma(,)로 구분해 붙여 쓴 복수개의 상수는 모두 하나의 <code>ConstSpec</code>에 속하기 때문에 같은 <code>iota</code>값을 갖게 된다. 단, 똑같이 한 줄에 썼더라도 세미콜론을 이용해 <code>ConstSpec</code>을 나눈 경우에는 <code>iota</code>값이 증가한다.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#007020;font-weight:bold">const</span> (
</span></span><span style="display:flex;"><span>	zero, one = <span style="color:#007020;font-weight:bold">iota</span>, <span style="color:#007020;font-weight:bold">iota</span>; two, three
</span></span><span style="display:flex;"><span>)
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>0
</span></span><span style="display:flex;"><span>0
</span></span><span style="display:flex;"><span>1
</span></span><span style="display:flex;"><span>1
</span></span></code></pre></div><h2 id="중간값-지정">중간값 지정</h2>
<p>C에서 <code>enum</code>을 쓸 때는 중간값을 지정하는 것도 가능하다.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span><span style="color:#007020;font-weight:bold">enum</span> {
</span></span><span style="display:flex;"><span>	zero <span style="color:#666">=</span> <span style="color:#40a070">0</span>,
</span></span><span style="display:flex;"><span>	one,      <span style="color:#60a0b0;font-style:italic">/* = 1 */</span>
</span></span><span style="display:flex;"><span>	two,      <span style="color:#60a0b0;font-style:italic">/* = 2 */</span>
</span></span><span style="display:flex;"><span>	five <span style="color:#666">=</span> <span style="color:#40a070">5</span>,
</span></span><span style="display:flex;"><span>	six,      <span style="color:#60a0b0;font-style:italic">/* = 6 */</span>
</span></span><span style="display:flex;"><span>	seven     <span style="color:#60a0b0;font-style:italic">/* = 7 */</span>
</span></span><span style="display:flex;"><span>};
</span></span></code></pre></div><p>Go에서 <code>iota</code>를 쓸 때는 이 부분에서 주의해야 한다.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#007020;font-weight:bold">package</span> main
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#007020;font-weight:bold">import</span> <span style="color:#4070a0">&#34;fmt&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#007020;font-weight:bold">func</span> <span style="color:#06287e">main</span>() {
</span></span><span style="display:flex;"><span>	<span style="color:#007020;font-weight:bold">const</span> (
</span></span><span style="display:flex;"><span>		zero = <span style="color:#007020;font-weight:bold">iota</span>
</span></span><span style="display:flex;"><span>		one
</span></span><span style="display:flex;"><span>		two
</span></span><span style="display:flex;"><span>		five = <span style="color:#40a070">5</span>
</span></span><span style="display:flex;"><span>		six
</span></span><span style="display:flex;"><span>		seven
</span></span><span style="display:flex;"><span>	)
</span></span><span style="display:flex;"><span>	
</span></span><span style="display:flex;"><span>	fmt.<span style="color:#06287e">Println</span>(six)
</span></span><span style="display:flex;"><span>	fmt.<span style="color:#06287e">Println</span>(seven)
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>5
</span></span><span style="display:flex;"><span>5
</span></span></code></pre></div><p>상수 그룹에서 literal로 값을 지정하고 이후 상수들에는 값을 지정하지 않을 경우 이전 상수의 값을 그대로 따른다. 따라서 <code>six</code>와 <code>seven</code>은 모두 5가 된다. 그렇다고 <code>six</code>에 <code>iota</code>로 값을 지정해 주면&hellip; 4가 된다. 이러한 경우에는 상수 그룹을 나누는 것이 현명하다.</p>
<h2 id="iota-유지-범위">iota 유지 범위</h2>
<p>위에서 <strong>상수 그룹</strong>이라는 용어를 사용했는데, <code>const</code> 뒤 괄호로 묶여 있는 단위를 의미한다. <code>iota</code>의 값은 이 단위 안에서만 유지된다. 따라서 아래 상수들의 값은 모두 0이다.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#007020;font-weight:bold">const</span> zero = <span style="color:#007020;font-weight:bold">iota</span>
</span></span><span style="display:flex;"><span><span style="color:#007020;font-weight:bold">const</span> one = <span style="color:#007020;font-weight:bold">iota</span>
</span></span><span style="display:flex;"><span><span style="color:#007020;font-weight:bold">const</span> two = <span style="color:#007020;font-weight:bold">iota</span>
</span></span></code></pre></div><h2 id="복잡한-상수-그룹">복잡한 상수 그룹</h2>
<p>지금까지 확인한 Go의 상수 그룹과 <code>iota</code>는 <code>enum</code>에 비해 뭔가 불편해 보인다. 하지만 실망하지 마시라. 이런 것도 가능하다.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#007020;font-weight:bold">package</span> main
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#007020;font-weight:bold">import</span> <span style="color:#4070a0">&#34;fmt&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#007020;font-weight:bold">func</span> <span style="color:#06287e">main</span>() {
</span></span><span style="display:flex;"><span>	<span style="color:#007020;font-weight:bold">const</span> (
</span></span><span style="display:flex;"><span>		bytes = <span style="color:#40a070">1</span> <span style="color:#666">&lt;&lt;</span> (<span style="color:#007020;font-weight:bold">iota</span> <span style="color:#666">*</span> <span style="color:#40a070">10</span>)
</span></span><span style="display:flex;"><span>		kilobytes
</span></span><span style="display:flex;"><span>		megabytes
</span></span><span style="display:flex;"><span>		gigabytes
</span></span><span style="display:flex;"><span>	)
</span></span><span style="display:flex;"><span>	
</span></span><span style="display:flex;"><span>	fmt.<span style="color:#06287e">Println</span>(bytes)
</span></span><span style="display:flex;"><span>	fmt.<span style="color:#06287e">Println</span>(kilobytes)
</span></span><span style="display:flex;"><span>	fmt.<span style="color:#06287e">Println</span>(megabytes)
</span></span><span style="display:flex;"><span>	fmt.<span style="color:#06287e">Println</span>(gigabytes)
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>1
</span></span><span style="display:flex;"><span>1024
</span></span><span style="display:flex;"><span>1048576
</span></span><span style="display:flex;"><span>1073741824
</span></span></code></pre></div>

  

<div class="see-also">
  <i class="fas fa-archive fa-fw"></i>
  <strong>See Also</strong>
  <ul>
	
	<li><a href="https://tramamte.github.io/2018/06/05/fun-variables-and-types/">명시적이지 않은 듯 명시적인 Go</a></li>
	
	<li><a href="https://tramamte.github.io/2018/05/30/fun-semicolons/">간단하거나, 복잡하거나. 세미콜론</a></li>
	
  </ul>
</div>


  
<div class="prev-next-post pure-g">
  <div class="pure-u-1-24">
    
    <a href="https://tramamte.github.io/2018/06/07/draft-future/"><i class="fas fa-angle-left"></i></a>
    
  </div>
  <div class="pure-u-10-24">
    
    <nav class="prev">
      <a href="https://tramamte.github.io/2018/06/07/draft-future/">Draft, Future 포스트 확인 방법</a>
    </nav>
    
  </div>
  <div class="pure-u-2-24">&nbsp;</div>
  <div class="pure-u-10-24" style="text-align: right;">
    
    <nav class="next">
      <a href="https://tramamte.github.io/2018/06/07/resolve-sample-error/">jBPM Maven Sample 오류 해결</a>
    </nav>
    
  </div>
  <div class="pure-u-1-24" style="text-align: right;">
    
    <a href="https://tramamte.github.io/2018/06/07/resolve-sample-error/"><i class="fas fa-angle-right"></i></a>
    
  </div>
</div>



  
<div id="disqus_thread"></div>
<script>
	

	


	(function() { 
		var d = document, s = d.createElement('script');
		s.src = 'https://' + 'awesome-patrick' + '.disqus.com/embed.js';
		s.setAttribute('data-timestamp', +new Date());
		(d.head || d.body).appendChild(s);
	})();
</script>

<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>


</div>

<div class="footer">
  <div class="small-print">
  <small>&copy2019 Patrick Yu. All rights reserved.</small>
</div>
<div class="small-print">
  <small>Powered by <a href="https://gohugo.io/" target="_blank">Hugo</a> with modified <a href="https://github.com/yoshiharuyamashita/blackburn" target="_blank">Blackburn</a> theme.</small>
</div>

</div>

</div>
</div>
<script src="https://tramamte.github.io/js/ui.js"></script>






</body>
</html>

